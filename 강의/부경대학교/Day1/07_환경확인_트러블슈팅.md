# 07. 환경 확인 및 트러블슈팅

Day1 실습(04 Linux, 05 Linux 실습, 06 Docker 환경 구성)을 마친 뒤 **각자 환경이 제대로 동작하는지 점검**하고, 실습 중 나온 문제를 함께 해결하는 시간입니다. 
이어서 **로그 확인·중지·삭제·리소스 확인** 등 자주 쓰는 명령어를 한 번 더 익힙니다.

---

## 개별 환경 점검

실습이 끝났으면 **본인 PC에서 아래를 순서대로 확인**해 보세요. Podman 사용자는 `podman`, Docker 사용자는 `docker`로 치환하면 됩니다.

**점검 항목**

- [ ] **Podman/Docker가 실행 중인가?** — `podman ps` 또는 `docker ps` 가 에러 없이 동작하는지.
- [ ] **실습 컨테이너가 정상 작동하는가?** — `data-eng-practice` 가 `podman ps`(또는 `docker ps`) 목록에 있고, `podman exec -it data-eng-practice bash` 로 들어갈 수 있는지.
- [ ] **볼륨 마운트가 되었는가?** — 컨테이너 안에서 `ls /data` 했을 때 호스트 다운로드 폴더 내용이 보이는지.
- [ ] **네트워크가 정상인가?** — 이미지 풀(`podman pull` / `docker pull`)이 되는지. (회사 방화벽·VPN에 따라 제한될 수 있음.)

---

## 발생한 문제 해결

실습 중 자주 나오는 상황과 대응을 정리했습니다. 자세한 내용은 **06_Docker_환경구성.md** 의 「5. 트러블슈팅」을 참고하세요.

| 문제 | 확인·해결 요약 |
|------|----------------|
| **Podman/Docker가 실행되지 않음** | Podman Desktop (또는 Docker Desktop)이 켜져 있는지 확인. CLI만 쓰는 환경에서는 데몬(서비스)이 떠 있어야 함. |
| **포트 충돌** | `docker-compose.yml` 의 `ports` 를 다른 포트로 변경하거나, 해당 포트를 쓰는 프로그램을 잠시 종료. |
| **권한 문제** | Linux: 사용자를 `docker` 그룹에 넣고 재로그인. Podman은 기본 rootless라 권한 이슈가 적은 편. |
| **디스크 공간 부족** | `podman system prune -a` 또는 `docker system prune -a` 로 사용하지 않는 이미지·컨테이너 정리. (필요한 것까지 삭제되므로 주의.) |

---

## 컨테이너 기본 명령어 추가 실습

06에서 띄운 **data-eng-practice** 컨테이너를 대상으로, 로그·중지·재시작·삭제를 연습합니다. Podman 기준으로 적었고, Docker 사용자는 `podman` → `docker` 로 치환하면 됩니다.

### `podman logs` / `docker logs`

컨테이너가 **표준 출력으로 찍은 로그**를 봅니다. 디버깅·동작 확인할 때 자주 씁니다.

```bash
$ podman logs data-eng-practice
Mon Feb 16 07:55:57 UTC 2026
Mon Feb 16 07:56:02 UTC 2026
Mon Feb 16 07:56:07 UTC 2026
```

- 실시간으로 보려면: `podman logs -f data-eng-practice` (Ctrl+C로 종료).

### `podman stop` / `docker stop`

실행 중인 컨테이너를 **중지**합니다. 컨테이너는 남아 있고, 다시 `start` 로 켤 수 있습니다.

```bash
podman stop data-eng-practice
```

### `podman start` / `docker start`

**중지된 컨테이너**를 다시 실행합니다. `stop` 한 뒤에 사용합니다.

```bash
podman start data-eng-practice
```

### `podman rm` / `docker rm`

컨테이너를 **삭제**합니다. **실행 중이면 먼저 `stop`** 한 뒤에 해야 합니다. 삭제하면 그 컨테이너는 없어지지만, **이미지는 그대로** 남습니다.

```bash
podman stop data-eng-practice
podman rm data-eng-practice
```

- 강제로 지우려면: `podman rm -f data-eng-practice` (실행 중이어도 삭제됨).

---

## 추가 유용한 명령어

| 명령어 | 설명 |
|--------|------|
| `podman ps` | **실행 중인** 컨테이너만 목록. |
| `podman ps -a` | **모든** 컨테이너(중지된 것 포함) 목록. |
| `podman images` | 보유한 **이미지** 목록 및 크기. |
| `podman stats` | 실행 중인 컨테이너의 **CPU·메모리 사용량** 실시간 확인. (Ctrl+C로 종료.) |

```bash
podman ps
podman ps -a
podman images
podman stats
```

- Compose로 띄웠다면 **한 번에 내리기**: `podman compose down` (또는 `docker compose down`). 해당 디렉토리에서 실행.

---

## 핵심 개념 정리

- **환경 점검**: Podman/Docker 실행 여부, 컨테이너 동작, 볼륨, 네트워크를 실습 후 한 번씩 확인.
- **로그·생명주기**: `logs`(로그), `stop`/`start`(중지·재시작), `rm`(삭제). 문제 생기면 로그부터 보는 습관이 좋음.
- **리소스 확인**: `ps`/`ps -a`(목록), `images`(이미지), `stats`(CPU·메모리). 디스크·메모리 부족 시 `system prune` 으로 정리.

---

## 참고

- [06_Docker_환경구성.md](06_Docker_환경구성.md) — 트러블슈팅 상세, Compose·Multi-stage 설명.
- [08_QA_마무리.md](08_QA_마무리.md) — 다음 단계: Day1 Q&A 및 마무리.

---

## 그림 출처

본 문서에는 인용한 외부 그림이 없습니다.
